{"ast":null,"code":"var _jsxFileName = \"/Users/mac/PycharmProjects/Hackathon/hack/Reverse-Image-Search-Ecommerce/React/src/App.js\";\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport './App.css';\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport SignInAndSignUpPage from './pages/sign-in-and-sign-up/sign-in-and-sign-up.component';\nimport CheckoutPage from './pages/checkout/checkout.component';\nimport Header from './components/header/header.component';\nimport Upload from './components/image-upload/upload.component'; // import { auth, createUserProfileDocument, addCollectionAndDocuments } from './firebase/firebase.utils';\n\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils';\nimport { setCurrentUser } from './redux/user/user.actions';\nimport { selectCurrentUser } from './redux/user/user.selectors';\nimport { setSearchString } from './redux/search/search.action';\nimport { selectSearchString } from './redux/search/search.selectors';\nimport { selectCollectionsForPreview } from './redux/shop/shop.selectors';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.unsubscribeFromAuth = null;\n\n    this.handleChange = e => {\n      // this.setState({ searchString: e.target.value },() => console.log(this.state.searchString))\n      this.props.setSearchString(e.target.value);\n    };\n  }\n\n  componentDidMount() {\n    // const { setCurrentUser, collectionsArray } = this.props;\n    const {\n      setCurrentUser\n    } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      }\n\n      setCurrentUser(userAuth); // addCollectionAndDocuments('collections',collectionsArray.map(({title, items}) => ({title,items})));\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n    this.props.setSearchString('');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: routeProps => /*#__PURE__*/React.createElement(HomePage, {\n        searchString: this.props.searchString,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 55\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/shop\",\n      component: ShopPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/upload\",\n      component: Upload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/checkout\",\n      component: CheckoutPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/signin\",\n      render: () => this.props.currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }) : /*#__PURE__*/React.createElement(SignInAndSignUpPage, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  searchString: selectSearchString,\n  collectionsArray: selectCollectionsForPreview\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\n  setSearchString: search => dispatch(setSearchString(search))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/mac/PycharmProjects/Hackathon/hack/Reverse-Image-Search-Ecommerce/React/src/App.js"],"names":["React","Switch","Route","Redirect","connect","createStructuredSelector","HomePage","ShopPage","SignInAndSignUpPage","CheckoutPage","Header","Upload","auth","createUserProfileDocument","setCurrentUser","selectCurrentUser","setSearchString","selectSearchString","selectCollectionsForPreview","App","Component","unsubscribeFromAuth","handleChange","e","props","target","value","componentDidMount","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","componentWillUnmount","render","routeProps","searchString","currentUser","mapStateToProps","collectionsArray","mapDispatchToProps","dispatch","user","search"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport './App.css';\n\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport SignInAndSignUpPage from './pages/sign-in-and-sign-up/sign-in-and-sign-up.component';\nimport CheckoutPage from './pages/checkout/checkout.component';\n\nimport Header from './components/header/header.component';\nimport Upload from './components/image-upload/upload.component';\n\n// import { auth, createUserProfileDocument, addCollectionAndDocuments } from './firebase/firebase.utils';\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils';\nimport { setCurrentUser } from './redux/user/user.actions';\nimport { selectCurrentUser } from './redux/user/user.selectors';\n\nimport { setSearchString } from './redux/search/search.action';\nimport { selectSearchString } from './redux/search/search.selectors';\n\nimport { selectCollectionsForPreview } from './redux/shop/shop.selectors';\n\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n\n  componentDidMount() {\n    // const { setCurrentUser, collectionsArray } = this.props;\n    const { setCurrentUser } = this.props;\n\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      }\n\n      setCurrentUser(userAuth);\n    // addCollectionAndDocuments('collections',collectionsArray.map(({title, items}) => ({title,items})));\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n    this.props.setSearchString('');\n  }\n\n  handleChange = (e) => {\n    // this.setState({ searchString: e.target.value },() => console.log(this.state.searchString))\n    this.props.setSearchString(e.target.value);\n  }\n\n\n\n  render() {\n    return (\n      <div>\n        <Header handleChange={this.handleChange}/>\n        <Switch>\n          <Route exact path='/' render={routeProps => <HomePage searchString={this.props.searchString}/>} />\n          <Route path='/shop' component={ShopPage} />\n          <Route path='/upload' component={Upload} />\n          <Route exact path='/checkout' component={CheckoutPage} />\n          <Route\n            exact\n            path='/signin'\n            render={() =>\n              this.props.currentUser ? (\n                <Redirect to='/' />\n              ) : (\n                <SignInAndSignUpPage />\n              )\n            }\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  searchString: selectSearchString,\n  collectionsArray: selectCollectionsForPreview\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\n  setSearchString: search => dispatch(setSearchString(search))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}